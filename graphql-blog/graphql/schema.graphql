"""
GraphQL Schema for Blog using your existing structure
"""
type Post {
  id: ID!
  title: String!
  content: String!
  author: String!
  published: Boolean!
  comments: [Comment!]! @hasMany
  created_at: DateTime!
  updated_at: DateTime!
}

type Comment {
  id: ID!
  post_id: ID!
  author: String!
  content: String!
  post: Post! @belongsTo
  created_at: DateTime!
  updated_at: DateTime!
}

"""
Queries for fetching data
"""
type Query {
  posts: [Post!]! @all
  post(id: ID!): Post @find
  comments: [Comment!]! @all
  comment(id: ID!): Comment @find
}

"""
Mutations for creating/updating/deleting
"""
type Mutation {
  createPost(title: String!, content: String!, author: String!, published: Boolean): Post! @create
  updatePost(id: ID!, title: String, content: String, author: String, published: Boolean): Post! @update
  deletePost(id: ID!): Post! @delete

  createComment(post_id: ID!, author: String!, content: String!): Comment! @create
  updateComment(id: ID!, author: String, content: String): Comment! @update
  deleteComment(id: ID!): Comment! @delete
}
